
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Switch db from sqlite3 to postgres in Rails app - If you see it</title>
  <meta name="author" content="Lynne Qu">

  
  <meta name="description" content="Switch from sqlite3 to postgres Step 1: modify Gemfile 1
$ gem 'pg' Step 2: modify database.yml Change the database adapter and database name in &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://lynnequ.github.com/blog/2013/08/07/switch-db-from-sqlite3-to-postgres-in-rails-app">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="If you see it" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-40394184-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">If you see it</a></h1>
  
    <h2>Live for passion</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:lynnequ.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Switch Db From Sqlite3 to Postgres in Rails App</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-08-07T14:28:00-07:00" pubdate data-updated="true">Aug 7<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><h4>Switch from sqlite3 to postgres</h4>

<h5>Step 1: modify Gemfile</h5>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ gem 'pg'</span></code></pre></td></tr></table></div></figure>


<h5>Step 2: modify database.yml</h5>

<p>Change the database adapter and database name in database.yml:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>development:
</span><span class='line'>  adapter: postgresql
</span><span class='line'>  encoding: utf8
</span><span class='line'>  database: inventory_development
</span><span class='line'>  host: localhost
</span><span class='line'>  pool: 5
</span><span class='line'>  timeout: 5000
</span><span class='line'>
</span><span class='line'>test:
</span><span class='line'>  adapter: postgresql
</span><span class='line'>  encoding: utf8
</span><span class='line'>  database: inventory_test
</span><span class='line'>  pool: 5
</span><span class='line'>  timeout: 5000
</span><span class='line'>
</span><span class='line'>production:
</span><span class='line'>  adapter: postgresql
</span><span class='line'>  encoding: utf8
</span><span class='line'>  database: inventory_production
</span><span class='line'>  pool: 5
</span><span class='line'>  timeout: 5000</span></code></pre></td></tr></table></div></figure>


<p><strong>Note</strong>:
You don&#8217;t need db/xx in the database part cause postgres is not like sqlite3 provided a file under db folder.</p>

<h5>Step 3: create database</h5>

<p>You need to create database in postgres based on the name you specified in database.yml, all development, test and production.</p>

<h5>Step 4: Rails DB migrate</h5>

<p>Run the following in terminal:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ bundle update   
</span><span class='line'>$ bundle install</span></code></pre></td></tr></table></div></figure>


<p><strong>Note</strong>
1. If you are planning deploy to heroku, heroku will create the database for you according your database.yml
2. If you are planning deploy to heroku via Snap, you need to go change the configuration for the build to use postgresql manually. Snap will pick up your db choice when you added it to it, but now monitoring it all the time for now.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Lynne Qu</span></span>

      








  


<time datetime="2013-08-07T14:28:00-07:00" pubdate data-updated="true">Aug 7<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/rails/'>Rails</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://lynnequ.github.com/blog/2013/08/07/switch-db-from-sqlite3-to-postgres-in-rails-app/" data-via="" data-counturl="http://lynnequ.github.com/blog/2013/08/07/switch-db-from-sqlite3-to-postgres-in-rails-app/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/08/06/bootstrp-ruby-on-rails/" title="Previous Post: Bootstrp ruby on rails">&laquo; Bootstrp ruby on rails</a>
      
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
	<h1>Be Strong</h1>
	<p>Love coding, love life</p>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/blog/categories/android'>Android (4)</a></li><li><a href='/blog/categories/basics'>basics (1)</a></li><li><a href='/blog/categories/chef'>chef (1)</a></li><li><a href='/blog/categories/command'>command (1)</a></li><li><a href='/blog/categories/erb'>erb (1)</a></li><li><a href='/blog/categories/example'>example (1)</a></li><li><a href='/blog/categories/function-programming'>function programming (1)</a></li><li><a href='/blog/categories/git'>git (1)</a></li><li><a href='/blog/categories/github'>github (2)</a></li><li><a href='/blog/categories/google-map-api-v2'>Google Map API v2 (2)</a></li><li><a href='/blog/categories/google-play-service-7'>Google Play Service 7 (1)</a></li><li><a href='/blog/categories/java'>java (2)</a></li><li><a href='/blog/categories/java7'>java7 (1)</a></li><li><a href='/blog/categories/jdk7-installation'>jdk7 installation (1)</a></li><li><a href='/blog/categories/jre7'>jre7 (1)</a></li><li><a href='/blog/categories/life-note'>life note (1)</a></li><li><a href='/blog/categories/listview'>ListView (1)</a></li><li><a href='/blog/categories/mac'>mac (6)</a></li><li><a href='/blog/categories/maven'>maven (2)</a></li><li><a href='/blog/categories/notes'>notes (2)</a></li><li><a href='/blog/categories/octopress'>octopress (1)</a></li><li><a href='/blog/categories/python'>python (1)</a></li><li><a href='/blog/categories/rails'>Rails (1)</a></li><li><a href='/blog/categories/ror'>ROR (1)</a></li><li><a href='/blog/categories/ruby'>ruby (1)</a></li><li><a href='/blog/categories/ruby-on-rails'>Ruby on Rails (1)</a></li><li><a href='/blog/categories/scala-installation'>scala installation (1)</a></li><li><a href='/blog/categories/shell'>shell (1)</a></li><li><a href='/blog/categories/sqlite3'>sqlite3 (1)</a></li><li><a href='/blog/categories/startup'>startup (1)</a></li><li><a href='/blog/categories/terminal'>terminal (2)</a></li><li><a href='/blog/categories/vagrant'>vagrant (1)</a></li><li><a href='/blog/categories/博客'>博客 (1)</a></li></ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/08/07/switch-db-from-sqlite3-to-postgres-in-rails-app/">Switch db from sqlite3 to postgres in Rails app</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/06/bootstrp-ruby-on-rails/">Bootstrp ruby on rails</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/05/sqlite3-with-android/">Sqlite3 with Android</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/05/install-java-7-on-mac/">Install Java 7 on Mac</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/07/24/scala-initialization/">Scala Initialization</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/blog/categories/android' style='font-size: 140.0%'>Android(4)</a> <a href='/blog/categories/basics' style='font-size: 110.0%'>basics(1)</a> <a href='/blog/categories/chef' style='font-size: 110.0%'>chef(1)</a> <a href='/blog/categories/command' style='font-size: 110.0%'>command(1)</a> <a href='/blog/categories/erb' style='font-size: 110.0%'>erb(1)</a> <a href='/blog/categories/example' style='font-size: 110.0%'>example(1)</a> <a href='/blog/categories/function-programming' style='font-size: 110.0%'>function programming(1)</a> <a href='/blog/categories/git' style='font-size: 110.0%'>git(1)</a> <a href='/blog/categories/github' style='font-size: 120.0%'>github(2)</a> <a href='/blog/categories/google-map-api-v2' style='font-size: 120.0%'>Google Map API v2(2)</a> <a href='/blog/categories/google-play-service-7' style='font-size: 110.0%'>Google Play Service 7(1)</a> <a href='/blog/categories/java' style='font-size: 120.0%'>java(2)</a> <a href='/blog/categories/java7' style='font-size: 110.0%'>java7(1)</a> <a href='/blog/categories/jdk7-installation' style='font-size: 110.0%'>jdk7 installation(1)</a> <a href='/blog/categories/jre7' style='font-size: 110.0%'>jre7(1)</a> <a href='/blog/categories/life-note' style='font-size: 110.0%'>life note(1)</a> <a href='/blog/categories/listview' style='font-size: 110.0%'>ListView(1)</a> <a href='/blog/categories/mac' style='font-size: 160.0%'>mac(6)</a> <a href='/blog/categories/maven' style='font-size: 120.0%'>maven(2)</a> <a href='/blog/categories/notes' style='font-size: 120.0%'>notes(2)</a> <a href='/blog/categories/octopress' style='font-size: 110.0%'>octopress(1)</a> <a href='/blog/categories/python' style='font-size: 110.0%'>python(1)</a> <a href='/blog/categories/rails' style='font-size: 110.0%'>Rails(1)</a> <a href='/blog/categories/ror' style='font-size: 110.0%'>ROR(1)</a> <a href='/blog/categories/ruby' style='font-size: 110.0%'>ruby(1)</a> <a href='/blog/categories/ruby-on-rails' style='font-size: 110.0%'>Ruby on Rails(1)</a> <a href='/blog/categories/scala-installation' style='font-size: 110.0%'>scala installation(1)</a> <a href='/blog/categories/shell' style='font-size: 110.0%'>shell(1)</a> <a href='/blog/categories/sqlite3' style='font-size: 110.0%'>sqlite3(1)</a> <a href='/blog/categories/startup' style='font-size: 110.0%'>startup(1)</a> <a href='/blog/categories/terminal' style='font-size: 120.0%'>terminal(2)</a> <a href='/blog/categories/vagrant' style='font-size: 110.0%'>vagrant(1)</a> <a href='/blog/categories/博客' style='font-size: 110.0%'>博客(1)</a> </span>
</section>

<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud" width="100%" height="250"><embed type='application/x-shockwave-flash' src='/javascripts/tagcloud.swf'width='100%' height='250' bgcolor='#f2f2f2' id='tagcloudflash' name='tagcloudflash' quality='high' allowscriptaccess='always'flashvars="tcolor=0x333333&amp;tcolor2=0x333333&amp;hicolor=0x000000&amp;tspeed=100&amp;distr=true&amp;mode=tags&amp;tagcloud=%3Ctags%3E%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fandroid%27+style%3D%27font-size%3A+36.66666666666667%25%27%3EAndroid%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fbasics%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Ebasics%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fchef%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Echef%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fcommand%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Ecommand%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Ferb%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Eerb%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fexample%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Eexample%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Ffunction-programming%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Efunction+programming%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fgit%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Egit%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fgithub%27+style%3D%27font-size%3A+23.333333333333336%25%27%3Egithub%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fgoogle-map-api-v2%27+style%3D%27font-size%3A+23.333333333333336%25%27%3EGoogle+Map+API+v2%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fgoogle-play-service-7%27+style%3D%27font-size%3A+16.666666666666668%25%27%3EGoogle+Play+Service+7%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fjava%27+style%3D%27font-size%3A+23.333333333333336%25%27%3Ejava%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fjava7%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Ejava7%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fjdk7-installation%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Ejdk7+installation%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fjre7%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Ejre7%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Flife-note%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Elife+note%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Flistview%27+style%3D%27font-size%3A+16.666666666666668%25%27%3EListView%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fmac%27+style%3D%27font-size%3A+50.0%25%27%3Emac%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fmaven%27+style%3D%27font-size%3A+23.333333333333336%25%27%3Emaven%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fnotes%27+style%3D%27font-size%3A+23.333333333333336%25%27%3Enotes%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Foctopress%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Eoctopress%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fpython%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Epython%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Frails%27+style%3D%27font-size%3A+16.666666666666668%25%27%3ERails%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fror%27+style%3D%27font-size%3A+16.666666666666668%25%27%3EROR%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fruby%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Eruby%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fruby-on-rails%27+style%3D%27font-size%3A+16.666666666666668%25%27%3ERuby+on+Rails%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fscala-installation%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Escala+installation%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fshell%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Eshell%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fsqlite3%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Esqlite3%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fstartup%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Estartup%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fterminal%27+style%3D%27font-size%3A+23.333333333333336%25%27%3Eterminal%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2Fvagrant%27+style%3D%27font-size%3A+16.666666666666668%25%27%3Evagrant%3C%2Fa%3E+%3Ca+href%3D%27http%3A%2F%2Flynnequ.github.com%2Fblog%2Fcategories%2F%E5%8D%9A%E5%AE%A2%27+style%3D%27font-size%3A+16.666666666666668%25%27%3E%E5%8D%9A%E5%AE%A2%3C%2Fa%3E+%3C%2Ftags%3E"></span>
</section>


  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Lynne Qu -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ifyouseeit';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://lynnequ.github.com/blog/2013/08/07/switch-db-from-sqlite3-to-postgres-in-rails-app/';
        var disqus_url = 'http://lynnequ.github.com/blog/2013/08/07/switch-db-from-sqlite3-to-postgres-in-rails-app/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
