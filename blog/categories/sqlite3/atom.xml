<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: sqlite3 | If you see it]]></title>
  <link href="http://lynnequ.github.com/blog/categories/sqlite3/atom.xml" rel="self"/>
  <link href="http://lynnequ.github.com/"/>
  <updated>2013-11-12T20:09:44-08:00</updated>
  <id>http://lynnequ.github.com/</id>
  <author>
    <name><![CDATA[Lynne Qu]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Switch DB from sqlite3 to postgres in Rails app]]></title>
    <link href="http://lynnequ.github.com/blog/2013/08/07/switch-db-from-sqlite3-to-postgres-in-rails-app/"/>
    <updated>2013-08-07T14:28:00-07:00</updated>
    <id>http://lynnequ.github.com/blog/2013/08/07/switch-db-from-sqlite3-to-postgres-in-rails-app</id>
    <content type="html"><![CDATA[<h4>Switch from sqlite3 to postgres</h4>

<h5>Step 1: modify Gemfile</h5>

<p>{% codeblock %}<br/>
$ gem 'pg'
{% endcodeblock %}</p>

<h5>Step 2: modify database.yml</h5>

<p>Change the database adapter and database name in database.yml:</p>

<p>{% codeblock %}<br/>
development:
  adapter: postgresql
  encoding: utf8
  database: inventory_development
  host: localhost
  pool: 5
  timeout: 5000</p>

<p>test:
  adapter: postgresql
  encoding: utf8
  database: inventory_test
  pool: 5
  timeout: 5000</p>

<p>production:
  adapter: postgresql
  encoding: utf8
  database: inventory_production
  pool: 5
  timeout: 5000</p>

<p>{% endcodeblock %}</p>

<p><strong>Note</strong>:
You don't need db/xx in the database part cause postgres is not like sqlite3 provided a file under db folder.</p>

<h5>Step 3: create database</h5>

<p>You need to create database in postgres based on the name you specified in database.yml, all development, test and production.
I used <a href="http://postgresapp.com/">PostgresApp</a> and then:<br/>
{% codeblock %}<br/>
/Applications/Postgres.app/Contents/MacOS/bin/createdb YOUR_DB_NAME<br/>
{% endcodeblock %}</p>

<p>You can follow the documentation and add the bin to your path.</p>

<h5>Step 4: Rails DB migrate</h5>

<p>Run the following in terminal:</p>

<p>{% codeblock %}<br/>
$ bundle update <br/>
$ bundle install<br/>
$ rake db:migrate
{% endcodeblock %}</p>

<p><strong>IMPORTANT NOTE</strong>
If you are running your rails server in different mode locally, like production mode, you need to use the following line to performe your db migration.</p>

<p>{% codeblock %}<br/>
RAILS_ENV=production rake db:migrate
{% endcodeblock %}</p>

<h5>Note</h5>

<p><strong>1</strong>. If you are planning deploy to heroku, heroku will create the database for you according your database.yml</p>

<p><strong>2</strong>. If you are planning deploy to heroku via Snap, you need to go change the configuration for the build to use postgresql manually. Snap will pick up your db choice when you added it to it, but now monitoring it all the time for now.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Sqlite3 with Android]]></title>
    <link href="http://lynnequ.github.com/blog/2013/08/05/sqlite3-with-android/"/>
    <updated>2013-08-05T23:20:00-07:00</updated>
    <id>http://lynnequ.github.com/blog/2013/08/05/sqlite3-with-android</id>
    <content type="html"><![CDATA[<p>Prerequisite: <a href="http://ifyouseeit.org/blog/2013/03/21/android-app-with-google-map-api-v2-tutorial/">set up <code>adb</code> command</a></p>

<p>{% codeblock %}</p>

<p>$ adb devices ## I have one real device and one emulator<br/>
List of devices attached<br/>
xxxxxxxxxxxx    device<br/>
emulator-5554   device</p>

<p>$ adb -s emulator-5554 shell ## To access specific device's shell and then use sqlite3 command
root@android:/ # sqlite3
SQLite version 3.7.11 2012-03-20 11:35:50
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite></p>

<p>$ adb -s emulator-5554  pull /system/xbin/sqlite3
4005 KB/s (67880 bytes in 0.016s)
s
$ adb -s 015d28569058200a push sqlite3 /system/xbin/
failed to copy 'sqlite3' to '/system/xbin//sqlite3': Read-only file system
{% endcodeblock %}</p>
]]></content>
  </entry>
  
</feed>
